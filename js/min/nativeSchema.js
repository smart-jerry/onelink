/*! jollychic-mobile @version v3.4.0 - Tue Mar 14 2017 16:01:57 GMT+0800 (中国标准时间) */
!function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.nativeSchema=t()}(this,function(){var e=navigator.userAgent.toLowerCase(),t=function(t){var o=(""+(new RegExp(t+"(\\d+((\\.|_)\\d+)*)").exec(e)||[,0])[1]).replace(/_/g,".");return!!parseFloat(o)},o={isAndroid:function(){return t("android[/ ]")},isMobileQQ:function(){var e=navigator.userAgent;return/(iPad|iPhone|iPod).*? (IPad)?QQ\/([\d\.]+)/.test(e)||/\bV1_AND_SQI?_([\d\.]+)(.*? QQ\/([\d\.]+))?/.test(e)},isIOS:function(){return t("os ")},isWx:function(){return!!navigator.userAgent.match(/micromessenger/i)},isPC:function(){return!t("os ")&&!t("android[/ ]")}},n={PROTOCOL:"jollychic://",HOME:"home",FAILBACK:{ANDROID:"https://play.google.com/store/apps/details?id=com.jollycorp.jollychic&referrer=utm_source%3Dwww.jollychic.com%26utm_medium%3Dreferral",IOS:"https://itunes.apple.com/app/jollychic-affordable-fashion/id944846798?mt=8",MOBILE:"",APP:""},APK_INFO:{PKG:"com.jollycorp.jollychic",CATEGORY:"android.intent.category.DEFAULT",ACTION:"android.intent.action.VIEW"},LOAD_WAITING:3e3},i=window.navigator.userAgent,r=(i.match(/Chrome\/([\d.]+)/)||i.match(/CriOS\/([\d.]+)/))&&o.isAndroid()&&!o.isMobileQQ(),a=/FBAV\/([\d.]+)/.test(i),c=function(e){return(e||document.URL).match(/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/)},d=function(e,t){this.url=e,this.params={},this.isEncode=t||!1,this.init()};return d.prototype={init:function(){var e=this.url;if(e){var t=e.indexOf("?");if(t>0&&(e=e.substr(t),t=e.indexOf("?")),0===t){e=e.substr(t+1);for(var o=this.isEncode?encodeURIComponent("&"):"&",n=e.split(o),i=0,r=n.length;i<r;i++){var a=n[i];if(a.indexOf("&")>0)for(var c=n[i].split("&"),d=0,l=c.length;d<l;d++){var u=c[d].split("=");this.params[u[0]]=u[1]}else{var u=a.split("=");this.params[u[0]]=u[1]}}}}},get:function(e){return this.params[e]}},{mixinConfig:function(e){if(!e)return!0;n.PROTOCOL=e.protocol||n.PROTOCOL,n.LOAD_WAITING=e.loadWaiting||n.LOAD_WAITING,o.isIOS()?(n.FAILBACK.IOS=e.failIosUrl||n.FAILBACK.IOS,n.FAILBACK.APP=n.FAILBACK.IOS):o.isAndroid()&&(n.FAILBACK.ANDROID=e.failAndroidUrl||n.FAILBACK.ANDROID,n.FAILBACK.APP=n.FAILBACK.ANDROID,n.APK_INFO=e.apkInfo||n.APK_INFO)},generateSchema:function(){var e=c()[16]||c()[17]||"",t=new d(e),i=t.get("jy_url_app")?decodeURIComponent(t.get("jy_url_app")):null,r=t.get("jy_url_wap")?decodeURIComponent(t.get("jy_url_wap")).replace(/\'/g,"-"):null,a=t.get("jy_down")?decodeURIComponent(t.get("jy_down")):null,l=t.get("zy_cv")?decodeURIComponent(t.get("zy_cv")):null,u=t.get("jy_other")?decodeURIComponent(t.get("jy_other")):"d=default",s=!!t.get("is_webview"),p=i&&i.split(n.PROTOCOL)[1]?i.split(n.PROTOCOL)[1]:"";if(r){var m,f="",A=[];if(l){m=["utm_source","utm_medium","utm_campaign","utm_adgroup","utm_content"],A=l.split("|");for(var I=0;I<A.length;I++)m[I]&&(f+="&"+m[I]+"="+A[I])}r.indexOf("?")>0?(r+="&frm_auto=auto_link&zy_cv="+encodeURIComponent(l)+"&jy_other="+encodeURIComponent(u),r+=f):(r+="?frm_auto=auto_link&zy_cv="+encodeURIComponent(l)+"&jy_other="+encodeURIComponent(u),r+=f),n.FAILBACK.MOBILE=r}return p=o.isPC()?a?"http://www.jollychic.com/special-appDown20151215-index.html":n.FAILBACK.MOBILE:s?n.PROTOCOL+p:n.PROTOCOL+p+"?zy_cv="+encodeURIComponent(l)+"&"+u},loadSchema:function(e){this.mixinConfig(e);var t=this.generateSchema();if(!t)return!1;var o,i=document.createElement("iframe"),c=document.createElement("a"),d=document.body,l=!0,u=null;setTimeout(function(){l?"undefined"!=typeof TrackLog&&void 0!==TrackLog.trackLogSend&&TrackLog.trackLogSend({_type:"pv_debug",_info:{src:t,install:"yes"}},!0):(window.location.href=n.FAILBACK.MOBILE||n.FAILBACK.APP,"undefined"!=typeof TrackLog&&void 0!==TrackLog.trackLogSend&&TrackLog.trackLogSend({_type:"pv_debug",_info:{src:t,install:"no"}},!0)),clearTimeout(u),r&&(a?d.removeChild(i):d.removeChild(c))},n.LOAD_WAITING),u=setTimeout(function(){o=Date.now(),r?a?(d.appendChild(i),i.src=t):(d.appendChild(c),c.href=t,c.click()):window.location.href=t},30),setTimeout(function(){var e=Date.now();(!o||e-o<1100)&&(l=!1)},1e3)}}});